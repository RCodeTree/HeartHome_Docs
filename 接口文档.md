# 心灵解忧所 - API 接口文档

## 用户模块

### 1. 用户登录

#### 接口描述
用户使用账号密码登录系统

#### 请求信息
- **请求方法**: POST
- **请求路径**: `/user/login/signin`
- **Content-Type**: application/json

#### 请求参数
| 参数名 | 类型 | 是否必需 | 说明 |
|--------|------|----------|------|
| username | string | 是 | 用户名 |
| password | string | 是 | 密码 |
| avatarUrl | string | 否 | 头像URL |

#### 请求示例
```json
{
  "username": "testuser",
  "password": "123456",
  "avatarUrl": "https://example.com/avatar.jpg"
}
```

#### 响应格式
##### 成功响应
```json
{
  "code": 200,
  "message": "登录成功",
  "data": {
    "user": {
      "username": "testuser",
      "password": "123456",
      "avatarUrl": "https://example.com/avatar.jpg"
    },
    "jwtToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9..."
  }
}
```

##### 失败响应
```json
{
  "code": 401,
  "message": "用户名或密码错误"
}
```

---

### 2. 用户注册

#### 接口描述
用户注册新账号

#### 请求信息
- **请求方法**: POST
- **请求路径**: `/user/login/signup`
- **Content-Type**: application/json

#### 请求参数
| 参数名 | 类型 | 是否必需 | 说明 |
|--------|------|----------|------|
| username | string | 是 | 用户名 |
| password | string | 是 | 密码 |
| avatarUrl | string | 否 | 头像URL |

#### 请求示例
```json
{
  "username": "newuser",
  "password": "123456",
  "avatarUrl": "https://example.com/avatar.jpg"
}
```

#### 响应格式
##### 成功响应
```json
{
  "code": 200,
  "message": "注册成功",
  "data": null
}
```

##### 失败响应
```json
{
  "code": 400,
  "message": "注册失败"
}
```

---

### 3. 获取用户信息

#### 接口描述
根据用户名获取用户详细信息

#### 请求信息
- **请求方法**: GET
- **请求路径**: `/user/userInfo/{username}`
- **需要认证**: 是（需要携带JWT token）

#### 请求参数
| 参数名 | 类型 | 位置 | 是否必需 | 说明 |
|--------|------|------|----------|------|
| username | string | 路径参数 | 是 | 用户名 |

#### 请求头
```
Authorization: Bearer <token>
```

#### 请求示例
```
GET /user/userInfo/rong
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### 响应格式
##### 成功响应
```json
{
  "code": 200,
  "message": "获取用户信息成功",
  "data": {
    "username": "rong",
    "avatarUrl": "/image/OIP - C (11).jpg",
    "personalDescription": "初始用户",
    "address": "广西",
    "createTime": "2024-01-01 10:00:00",
    "status": 0,
    "manager": 1,
    "worksCount": 5,
    "fansCount": 10,
    "followsCount": 8
  }
}
```

##### 失败响应
```json
{
  "code": 401,
  "message": "用户校验失败"
}
```

或

```json
{
  "code": 400,
  "message": "用户名不能为空"
}
```

---

## 作品模块

### 1. 获取用户所有作品列表

#### 接口描述
根据用户名获取该用户的所有作品列表

#### 请求信息
- **请求方法**: GET
- **请求路径**: `/works/all/{username}`
- **需要认证**: 是（需要携带JWT token）

#### 请求参数
| 参数名 | 类型 | 位置 | 是否必需 | 说明 |
|--------|------|------|----------|------|
| username | string | 路径参数 | 是 | 用户名 |

#### 请求头
```
Authorization: Bearer <token>
```

#### 请求示例
```
GET /works/all/rong
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### 响应格式
##### 成功响应
```json
{
  "code": 200,
  "message": "获取用户作品成功",
  "data": [
    {
      "title": "作品标题1",
      "shortDesc": "作品描述1",
      "imageUrl": "/images/work1.jpg",
      "createTime": "2024-01-01T10:00:00",
      "likesCount": 15,
      "commentsCount": 8,
      "workType": "PAINTING"
    },
    {
      "title": "作品标题2",
      "shortDesc": "作品描述2",
      "imageUrl": "/images/work2.jpg",
      "createTime": "2024-01-02T14:30:00",
      "likesCount": 23,
      "commentsCount": 12,
      "workType": "PHOTOGRAPHY"
    }
  ]
}
```

##### 失败响应
```json
{
  "code": 400,
  "message": "用户名不能为空"
}
```

---

### 2. 获取用户文章列表

#### 接口描述
根据用户名获取该用户的文章作品列表

#### 请求信息
- **请求方法**: GET
- **请求路径**: `/works/essay/{username}`
- **需要认证**: 是（需要携带JWT token）

#### 请求参数
| 参数名 | 类型 | 位置 | 是否必需 | 说明 |
|--------|------|------|----------|------|
| username | string | 路径参数 | 是 | 用户名 |

#### 请求头
```
Authorization: Bearer <token>
```

#### 请求示例
```
GET /works/essay/rong
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### 响应格式
##### 成功响应
```json
{
  "code": 200,
  "message": "获取用户文章成功",
  "data": [
    {
      "title": "文章标题1",
      "shortDesc": "文章描述1",
      "imageUrl": "/images/essay1.jpg",
      "createTime": "2024-01-01T10:00:00",
      "likesCount": 15,
      "commentsCount": 8,
      "workType": "WRITING"
    }
  ]
}
```

##### 失败响应
```json
{
  "code": 400,
  "message": "用户名不能为空"
}
```

---

### 3. 获取用户图片作品列表

#### 接口描述
根据用户名获取该用户的图片作品列表

#### 请求信息
- **请求方法**: GET
- **请求路径**: `/works/image/{username}`
- **需要认证**: 是（需要携带JWT token）

#### 请求参数
| 参数名 | 类型 | 位置 | 是否必需 | 说明 |
|--------|------|------|----------|------|
| username | string | 路径参数 | 是 | 用户名 |

#### 请求头
```
Authorization: Bearer <token>
```

#### 请求示例
```
GET /works/image/rong
Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

#### 响应格式
##### 成功响应
```json
{
  "code": 200,
  "message": "获取用户图片成功",
  "data": [
    {
      "title": "图片标题1",
      "shortDesc": "图片描述1",
      "imageUrl": "/images/photo1.jpg",
      "createTime": "2024-01-01T10:00:00",
      "likesCount": 15,
      "commentsCount": 8,
      "workType": "PHOTOGRAPHY"
    }
  ]
}
```

##### 失败响应
```json
{
  "code": 400,
  "message": "用户名不能为空"
}
```

---

## 说明

### 认证说明
- `Authorization: Bearer <token>` 表示需要在 HTTP 请求头中携带 `Authorization` 字段，值为 `Bearer ` 加上登录时获取到的 `token`
- 所有需要认证的接口都必须携带有效的JWT token

### 数据类型说明
- `WorkTypeEnum` 作品类型枚举值，可能包含：`PAINTING`（绘画）、`PHOTOGRAPHY`（摄影）、`WRITING`（文字）等
- 时间格式统一使用 ISO 8601 格式：`YYYY-MM-DDTHH:mm:ss`

### 响应格式说明
- 所有接口响应都遵循统一格式：`{"code": 状态码, "message": "消息", "data": 数据}`
- `code` 为 200 表示成功，其他值表示失败
- `data` 字段在成功时包含具体数据，失败时可能为 null

### 注意事项
- 示例响应仅为参考，实际响应可能包含更多或不同的字段
- 请根据实际后端实现调整路径、参数和响应格式
- 所有接口都支持跨域访问（CORS）
